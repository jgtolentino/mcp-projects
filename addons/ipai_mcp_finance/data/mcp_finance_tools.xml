<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Register default MCP Finance tools -->
        
        <record id="tool_get_trial_balance" model="mcp.finance.tool">
            <field name="name">Get Trial Balance</field>
            <field name="technical_name">get_trial_balance</field>
            <field name="category">query</field>
            <field name="sequence">10</field>
            <field name="requires_approval">False</field>
            <field name="description">Retrieve trial balance for a company with optional hierarchy and filters. Returns account codes, names, debit/credit totals, and running balances. Safe read-only operation.</field>
            <field name="parameter_schema">{
    "type": "object",
    "properties": {
        "company_id": {"type": "integer", "description": "Company ID (optional)"},
        "date_from": {"type": "string", "format": "date"},
        "date_to": {"type": "string", "format": "date"},
        "hierarchy": {"type": "boolean", "default": true},
        "account_types": {"type": "array", "items": {"type": "string"}},
        "include_zero": {"type": "boolean", "default": false}
    }
}</field>
        </record>

        <record id="tool_create_journal_entry" model="mcp.finance.tool">
            <field name="name">Create Journal Entry</field>
            <field name="technical_name">create_journal_entry</field>
            <field name="category">create</field>
            <field name="sequence">20</field>
            <field name="requires_approval">True</field>
            <field name="description">Create a journal entry with double-entry validation. Entries are created in draft state and require human approval by default. Validates account existence, period locks, and balance.</field>
            <field name="parameter_schema">{
    "type": "object",
    "properties": {
        "company_id": {"type": "integer"},
        "journal_code": {"type": "string", "description": "Journal code (MISC, BANK, etc.)"},
        "date": {"type": "string", "format": "date"},
        "ref": {"type": "string", "description": "Reference/memo"},
        "lines": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "account": {"type": ["string", "integer"]},
                    "debit": {"type": "number"},
                    "credit": {"type": "number"},
                    "name": {"type": "string"},
                    "partner": {"type": ["string", "integer"]},
                    "analytic": {"type": ["object", "integer"]}
                },
                "required": ["account"]
            }
        },
        "auto_post": {"type": "boolean", "default": false}
    },
    "required": ["journal_code", "date", "ref", "lines"]
}</field>
        </record>

        <record id="tool_generate_bir_2307" model="mcp.finance.tool">
            <field name="name">Generate BIR Form 2307</field>
            <field name="technical_name">generate_bir_2307</field>
            <field name="category">compliance</field>
            <field name="sequence">30</field>
            <field name="requires_approval">False</field>
            <field name="description">Generate Philippine BIR Form 2307 (Certificate of Creditable Tax Withheld at Source) for vendor payments with withholding tax. Outputs DAT file for BIR upload, Excel, or PDF.</field>
            <field name="parameter_schema">{
    "type": "object",
    "properties": {
        "company_id": {"type": "integer"},
        "period": {"type": "string", "pattern": "^\\d{4}-Q[1-4]$", "description": "YYYY-QN format"},
        "vendor_ids": {"type": "array", "items": {"type": "integer"}},
        "output_format": {"type": "string", "enum": ["dat", "xlsx", "pdf"], "default": "dat"}
    },
    "required": ["period"]
}</field>
        </record>

        <record id="tool_get_aging_report" model="mcp.finance.tool">
            <field name="name">Get Aging Report</field>
            <field name="technical_name">get_aging_report</field>
            <field name="category">query</field>
            <field name="sequence">40</field>
            <field name="requires_approval">False</field>
            <field name="description">Retrieve AR or AP aging report with customizable aging buckets. Returns partner balances grouped by age (current, 1-30, 31-60, 61-90, 90+ days).</field>
            <field name="parameter_schema">{
    "type": "object",
    "properties": {
        "company_id": {"type": "integer"},
        "report_type": {"type": "string", "enum": ["receivable", "payable"], "default": "receivable"},
        "as_of_date": {"type": "string", "format": "date"},
        "partner_ids": {"type": "array", "items": {"type": "integer"}}
    }
}</field>
        </record>

        <record id="tool_run_month_end_step" model="mcp.finance.tool">
            <field name="name">Run Month-End Step</field>
            <field name="technical_name">run_month_end_step</field>
            <field name="category">workflow</field>
            <field name="sequence">50</field>
            <field name="requires_approval">True</field>
            <field name="description">Execute a specific step in the month-end closing workflow. Steps: cutoff_validation, accruals, intercompany, lock_period, superset_refresh. Requires approval and creates audit trail.</field>
            <field name="parameter_schema">{
    "type": "object",
    "properties": {
        "company_id": {"type": "integer"},
        "period": {"type": "string", "pattern": "^\\d{4}-\\d{2}$", "description": "YYYY-MM format"},
        "step": {
            "type": "string",
            "enum": ["cutoff_validation", "accruals", "intercompany", "lock_period", "superset_refresh"]
        }
    },
    "required": ["period", "step"]
}</field>
        </record>

    </data>
</odoo>
